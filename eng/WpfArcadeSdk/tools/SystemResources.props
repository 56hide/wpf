<?xml version="1.0" encoding="utf-8"?>
<Project>

  <PropertyGroup>
    <!-- 
         Arcade requires us to set this property in order for it to appropriately update
         GenerateSource in our EmbeddedResource items.  Without this, no code generation
         will take place for any of our resx files.
         See GenerateResxSource.targets in Arcade.
    -->
    <GenerateResxSource>true</GenerateResxSource>
  </PropertyGroup>

  <ItemDefinitionGroup>
    <EmbeddedResource>
      <GenerateSource>true</GenerateSource>
      <ManifestResourceName>FxResources.$(AssemblyName).SR</ManifestResourceName>
      <GenerateResourcesCodeAsConstants>true</GenerateResourcesCodeAsConstants>

      <ClassName Condition="'$(AssemblyName)'=='PresentationBuildTasks'">MS.Utility.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='UIAutomationProvider'">System.SR</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='UIAutomationTypes'">System.SR</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='WindowsBase'">MS.Internal.WindowsBase.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='System.Windows.Controls.Ribbon'">Microsoft.Windows.Controls.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='System.Windows.Input.Manipulations'">System.SR</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='ReachFramework'">System.Windows.Xps.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='PresentationFramework'">System.Windows.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='PresentationUI'">System.Windows.TrustUI.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='WindowsFormsIntegration'">System.Windows.SRID</ClassName>
      <ClassName Condition="'$(AssemblyName)'=='PresentationCore'">MS.Internal.PresentationCore.SRID </ClassName>
      <!-- Required to ensure the PresentationCore CSharp NetModule builds. -->
      <ClassName Condition="'$(AssemblyName)'=='PresentationCoreCSharp'">MS.Internal.PresentationCore.SRID </ClassName>
      <Classname Condition="'%(ClassName)'==''">System.SRID</Classname>
    </EmbeddedResource>
  </ItemDefinitionGroup>
  
  <ItemGroup>
    <!-- 
        Workaround for https://github.com/dotnet/wpf/issues/1385
        ReadyToRun images of WPF applications crash 
        
        When producing ReadyToRun images, the ILLinker is configured to skip 
        C++/CLI images. See https://github.com/mono/linker/issues/651 and 
        https://github.com/mono/linker/pull/658. 
        
        In turn, this results in the failure of the dependencies of such assemblies from being
        identified and included in the ReadyToRun images. 
        
        This linker hint exists to ensure that such dependencies are included. We need
        to place these hints in an assembly that has a reference to the corresponding
        C++/CLI assembly. 
        
        To add these hints to an assembly put them in a file named "ILLinkTrim.xml" in the 
        same directory as the project file.
    -->
    <EmbeddedResource Condition="Exists('ILLinkTrim.xml')" Include="ILLinkTrim.xml">
      <XlfInput>false</XlfInput>
      <LogicalName>$(AssemblyName).xml</LogicalName>
    </EmbeddedResource>
  </ItemGroup>
</Project>

